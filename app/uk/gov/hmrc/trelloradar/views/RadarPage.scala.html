@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.trelloradar.config.AppConfig
@import uk.gov.hmrc.trelloradar.model.TrelloCard
@import uk.gov.hmrc.trelloradar.model.TrelloLabel
@import uk.gov.hmrc.trelloradar.model.FullQuadrant
@import play.api.libs.json.Json
@import uk.gov.hmrc.trelloradar.model.Ring

@this()

@(boardUrl: String, quadrant1: FullQuadrant, quadrant2: FullQuadrant, quadrant3: FullQuadrant, quadrant4: FullQuadrant)()




<html>

 <head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>MDTP Priorities Radar</title>
  <link rel="shortcut icon" href="">

  <script src='@controllers.routes.Assets.versioned("javascripts/d3.v4.min.js")'></script>
  <script src='@controllers.routes.Assets.versioned("javascripts/radar.js")'></script>

@*  <link rel="stylesheet" href="stylesheets/radar.css">*@
  <link rel="stylesheet" href='@controllers.routes.Assets.versioned("stylesheets/radar.css")'>
 </head>

 <body>

  <svg id="radar"></svg>

  <script>
          radar_visualization({
           svg_id: "radar",
           width: 1500,
           height: 1100,
           colors: {
            background: "#fff",
            grid: "#bbb",
            inactive: "#ddd"
           },
           title: "MDTP Priorities Radar",
           quadrants: [
            { name: "1: The right tools at the right times" },
            { name: "2: Effective and secure" },
            { name: "3: Propagate learning and experience" },
            { name: "4: Great place to work" }
           ],
           rings: [
            { name: "NOW", color: "#93c47d" },
            { name: "SOON", color: "#93d2c2" },
            { name: "LATER", color: "#fbdb84" },
            { name: "SOMEDAY", color: "#efafa9" }
           ],
           print_layout: true,
           // zoomed_quadrant: 0,
           //ENTRIES
           entries: @entriesScript
           //ENTRIES
          }
          );


  </script>


  <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
           (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-105375141-2', 'auto');
          ga('send', 'pageview');
  </script>


  <table>
   <tr>
    <td>

     <h3>What is the MDTP Priorities Radar?</h3>
     <p>
      The MDTP Priorities Radar is a visual guide to the work underway and planned by the platform teams.
         The work is separated into different timescales (rings) and assigned to the 4 different strategic platform goals (quadrants).
     </p>

     <ul>
      <li><strong>NOW</strong> &mdash; Work in progress and likely to be finished in the next 6 weeks</li>
      <li><strong>SOON</strong> &mdash; Work in progress or about to be started and likely to finished in the next 3 months</li>
      <li><strong>LATER</strong> &mdash; Work unlikely to be finished for 6 months or more.</li>
      <li><strong>MAYBE</strong> &mdash; Longer term strategic goals or possible solutions that may or may not pan out.</li>
     </ul>

    </td><td>

    <h3>What is the purpose?</h3>

    <p>
     To give a simple overview of the platform work and how it relates back to the overarching platform vision.
    </p>

    <h3>How do we maintain it?</h3>

    <p>
        We parse the data on <a href="@boardUrl">this trello board</a> and place the items in sectors based on their trello labels.
    </p>
   </td></tr>
  </table>

<hr/>


    <br/>
  <table>
   <tr><th>Card</th><th>Platform Goal</th><th>Timeframe</th></tr>
   @displayQuadrant(quadrant1)
   @displayQuadrant(quadrant2)
   @displayQuadrant(quadrant3)
   @displayQuadrant(quadrant4)
  </table>

  @displayQuadrant(quadrant: FullQuadrant) = {
   @displayCardList(quadrant.name, "now", quadrant.now.cards)
   @displayCardList(quadrant.name, "soon", quadrant.soon.cards)
   @displayCardList(quadrant.name, "later", quadrant.later.cards)
   @displayCardList(quadrant.name, "someday", quadrant.someday.cards)
  }

  @displayCardList(quadrantName: String, timeframe: String, cards: List[TrelloCard]) = {
  @for(card <- cards) {
   <tr class="fullTable">
    <td>@card.name</td>
    <td>@quadrantName</td>
    <td>@timeframe</td>
   </tr>
  }
  }


  @entriesScript() = {
   [
     @quadrantScript(quadrant1)
     @quadrantScript(quadrant2)
     @quadrantScript(quadrant3)
     @quadrantScript(quadrant4)
   ]
  }

  @quadrantScript(q: FullQuadrant) = {
   @cardScript(q.id, q.now)
   @cardScript(q.id, q.soon)
   @cardScript(q.id, q.later)
   @cardScript(q.id, q.someday)
  }

  @cardScript(quadrantId: Int, ring: Ring) = {
   @for(card <- ring.cards) {
     {
     quadrant: @quadrantId,
     ring: @ring.id,
     label: '@card.shortname',
     active: false,
     link: "../dunno.html",
     moved: 0
     },
    }
   }

 </body>
</html>

